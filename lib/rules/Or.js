// Generated by CoffeeScript 1.7.1
(function() {
  var __hasProp = {}.hasOwnProperty,
    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    __slice = [].slice,
    __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };

  (function(modules, factory) {
    var m;
    if (typeof define === 'function' && define.amd) {
      return define(modules, factory);
    } else {
      return module.exports = factory.apply(null, (function() {
        var _i, _len, _results;
        _results = [];
        for (_i = 0, _len = modules.length; _i < _len; _i++) {
          m = modules[_i];
          _results.push(require(m));
        }
        return _results;
      })());
    }
  })(['./Rule'], function(ValidatorRule) {
    var OrValidatorRule;
    return OrValidatorRule = (function(_super) {
      var union;

      __extends(OrValidatorRule, _super);

      union = function() {
        var arr, arrays, el, result, _i, _j, _len, _len1;
        arrays = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
        result = [];
        for (_i = 0, _len = arrays.length; _i < _len; _i++) {
          arr = arrays[_i];
          if ((arr != null) && arr.length > 0) {
            for (_j = 0, _len1 = arr.length; _j < _len1; _j++) {
              el = arr[_j];
              if (!(__indexOf.call(result, el) >= 0)) {
                result.push(el);
              }
            }
          }
        }
        return result;
      };

      OrValidatorRule.prototype.setOptions = function(options) {
        var rule, _i, _len, _ref;
        _ref = this.rules;
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          rule = _ref[_i];
          rule.setOptions(options);
        }
        return OrValidatorRule.__super__.setOptions.apply(this, arguments);
      };

      function OrValidatorRule(rules, options) {
        this.rules = rules;
        OrValidatorRule.__super__.constructor.call(this, options);
      }

      OrValidatorRule.prototype.getViolationCodes = function() {
        var rule;
        return union.apply(null, (function() {
          var _i, _len, _ref, _results;
          _ref = this.rules;
          _results = [];
          for (_i = 0, _len = _ref.length; _i < _len; _i++) {
            rule = _ref[_i];
            _results.push(rule.getViolationCodes());
          }
          return _results;
        }).call(this));
      };

      OrValidatorRule.prototype.validate = function(value) {
        var rule, violation, violations, _i, _len, _ref;
        violations = [];
        _ref = this.rules;
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          rule = _ref[_i];
          violation = rule.validate(value);
          if (violation.length === 0) {
            return [];
          }
          violations = violations.concat(violation);
        }
        return union(violations);
      };

      return OrValidatorRule;

    })(ValidatorRule);
  });

}).call(this);
